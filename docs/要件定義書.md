# 純鬼（じゅんき） 要件定義書

> バージョン：1.0  
> 最終更新：2025年1月

---

## 1. プロジェクト概要

| 項目 | 内容 |
|------|------|
| プロジェクト名 | 純鬼（じゅんき） |
| 種別 | 2D ホラーアドベンチャーゲーム |
| 概要 | 廃墟の美術館を舞台に、謎解きと追跡ホラーを融合した脱出ゲーム |

---

## 2. 技術スタック

### 2.1 開発言語・ランタイム

| 項目 | 採用技術 | 備考 |
|------|----------|------|
| 言語 | **Python 3.14.2** | 本プロジェクトで使用するバージョン |
| 仮想環境 | **venv** | Python 標準の仮想環境。ライブラリの依存関係をプロジェクトごとに管理 |

### 2.2 ゲームエンジン・ライブラリ

| 項目 | 採用技術 | 備考 |
|------|----------|------|
| ゲーム開発 | **Pygame** | 2D ゲーム向け。スプライト、サウンド、インプット、描画を扱う |
| フレームワーク | **なし** | 2D であるためフル機能ゲームエンジンは不要。Pygame で十分対応可能 |

### 2.3 データベース

| 項目 | 採用技術 | 備考 |
|------|----------|------|
| DB | **SQLite** | Python 標準ライブラリ `sqlite3` で利用。ファイルベースで導入が容易 |

### 2.4 開発環境

| 項目 | 内容 |
|------|------|
| OS | Windows / macOS / Linux 対応 |
| エディタ | 任意（VS Code, Cursor など） |
| バージョン管理 | Git |

---

## 3. 機能要件

### 3.1 コア機能

| ID | 機能 | 概要 | 優先度 |
|----|------|------|--------|
| F-001 | マップ表示 | 2D マップ上でプレイヤーを操作、部屋・廊下を表現 | 必須 |
| F-002 | プレイヤー操作 | キーボード/ゲームパッドによる移動 | 必須 |
| F-003 | 純鬼の追跡 | 敵キャラ「純鬼」がプレイヤーを追跡する挙動 | 必須 |
| F-004 | アイテム取得 | 鍵、懐中電灯などアイテムの収集・所持 | 必須 |
| F-005 | 謎解き | 暗号、パズル、金庫などのギミック | 必須 |
| F-006 | ゲームオーバー | 純鬼に接触した際の即死判定 | 必須 |
| F-007 | 脱出・エンディング | クリア条件の達成、複数エンディングの分岐 | 必須 |

### 3.2 データ管理機能

| ID | 機能 | 概要 | 優先度 |
|----|------|------|--------|
| F-101 | セーブ/ロード | SQLite を用いたセーブデータの永続化 | 必須 |
| F-102 | 設定の保存 | 音量、操作設定などを DB または設定ファイルに保存 | 任意 |
| F-103 | 実績・コレクション | エンディング達成状況、収集アイテムなどの記録 | 任意 |

### 3.3 サウンド・演出

| ID | 機能 | 概要 | 優先度 |
|----|------|------|--------|
| F-201 | BGM | 場面に応じた BGM の再生 | 必須 |
| F-202 | SE | 足音、ドア、アイテム取得などの効果音 | 必須 |
| F-203 | 演出 | 純鬼出現時の画面効果、暗転など | 推奨 |

---

## 4. 非機能要件

### 4.1 パフォーマンス

| 項目 | 要件 |
|------|------|
| フレームレート | 60 FPS を目標（Pygame の tick） |
| 起動時間 | 5 秒以内 |
| メモリ | 512MB 以下を目安 |

### 4.2 互換性

| 項目 | 要件 |
|------|------|
| Python バージョン | 3.14.2 |
| 解像度 | 1280x720 を基準（スケーリング対応可） |

### 4.3 保守性

| 項目 | 要件 |
|------|------|
| コード品質 | モジュール分割、適切なコメント |
| 設定の外部化 | マップデータ、定数は設定ファイルや DB で管理可能に |

---

## 5. ディレクトリ構成（案）

```
純鬼/
├── main.py              # エントリーポイント
├── requirements.txt     # 依存ライブラリ
├── venv/                # 仮想環境
├── assets/              # リソース
│   ├── images/          # スプライト、背景
│   ├── sounds/          # BGM、SE
│   └── fonts/           # フォント
├── src/                 # ソースコード
│   ├── game.py          # メインゲームループ
│   ├── player.py        # プレイヤー
│   ├── junki.py         # 純鬼（敵）
│   ├── map/             # マップ関連
│   ├── puzzle/          # 謎解き
│   └── db/              # DB アクセス
├── data/                # ゲームデータ
│   └── junki.db         # SQLite DB（セーブ等）
└── docs/                # ドキュメント
    ├── 要件定義書.md
    ├── 純鬼_オリジナルストーリー.md
    └── 青鬼ストーリー.md
```

---

## 6. 処理フロー図・チェックリスト

| ドキュメント | 内容 |
|--------------|------|
| [処理フロー図.md](処理フロー図.md) | ソースコードの処理の流れ（Mermaid + draw.io 形式） |
| [diagrams/](diagrams/) | draw.io 用 .drawio ファイル（diagrams.net で編集可） |
| [処理チェックリスト.md](処理チェックリスト.md) | 実装すべき処理のチェックリスト |

---

## 7. 開発フェーズ（案）

| フェーズ | 内容 | 想定期間 |
|----------|------|----------|
| Phase 1 | 環境構築、画面表示、プレイヤー移動 | 1〜2 週間 |
| Phase 2 | マップ、衝突判定、アイテム取得 | 2〜3 週間 |
| Phase 3 | 純鬼の AI、追跡、ゲームオーバー | 2〜3 週間 |
| Phase 4 | 謎解き、セーブ/ロード（SQLite） | 2〜3 週間 |
| Phase 5 | BGM/SE、演出、エンディング | 1〜2 週間 |
| Phase 6 | テスト、調整、リリース準備 | 1〜2 週間 |

---

## 8. 依存ライブラリ一覧

| パッケージ | 用途 | バージョン |
|------------|------|------------|
| pygame | 2D ゲーム開発 | 2.5.x 以上 |
| （SQLite） | DB | Python 標準 `sqlite3` で対応、追加インストール不要 |

---

## 9. 用語集

| 用語 | 説明 |
|------|------|
| 純鬼 | 本作の敵キャラ。白い人型の存在。追跡してくる。 |
| 瑠璃荘 | ゲームの舞台となる廃墟の美術館。 |
| アオイ | 主人公の名前。 |

---

*以上、純鬼 要件定義書 v1.0*
